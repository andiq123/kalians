"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[357],{5357:(D,u,s)=>{s.r(u),s.d(u,{AuthModule:()=>X});var d=s(9808),g=s(1631),a=s(1777),t=s(4893),r=s(2382),m=s(8746),l=s(8505),c=s(2340),_=s(520);let f=(()=>{class e{constructor(n){this.http=n,this.baseUrl=c.N.apiUrl+"auth/"}login(n,i){return this.http.post(this.baseUrl+"login",{username:n,password:i}).pipe((0,l.b)(p=>{localStorage.setItem("token",p.token)}))}register(n,i){return this.http.post(this.baseUrl+"register",{username:n,password:i}).pipe((0,l.b)(p=>{localStorage.setItem("token",p.token)}))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(_.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function v(e,o){1&e&&(t.TgZ(0,"div",10),t._uU(1," Username is required "),t.qZA())}function h(e,o){if(1&e&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&e){const n=o.ngIf;t.xp6(1),t.hij(" Username must be at least ",n.requiredLength," characters long ")}}function Z(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,v,2,0,"div",9),t.YNc(2,h,2,1,"div",9),t.qZA()),2&e){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",n.errors.required),t.xp6(1),t.Q6J("ngIf",n.errors.minlength)}}function T(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Z,3,2,"div",5),t.qZA()),2&e){const n=o.ngIf;t.xp6(1),t.Q6J("ngIf",n.touched&&n.errors)}}function I(e,o){1&e&&(t.TgZ(0,"div",10),t._uU(1," Password is required "),t.qZA())}function A(e,o){if(1&e&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&e){const n=o.ngIf;t.xp6(1),t.hij(" Password must be at least ",n.requiredLength," characters long ")}}function C(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,I,2,0,"div",9),t.YNc(2,A,2,1,"div",9),t.qZA()),2&e){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",n.errors.required),t.xp6(1),t.Q6J("ngIf",n.errors.minlength)}}function q(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,C,3,2,"div",5),t.qZA()),2&e){const n=o.ngIf;t.xp6(1),t.Q6J("ngIf",n.touched&&n.errors)}}function b(e,o){1&e&&(t.TgZ(0,"div",11),t.TgZ(1,"span",12),t._uU(2,"Loading..."),t.qZA(),t.qZA())}function x(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Sign in"),t.qZA())}function J(e,o){1&e&&(t.TgZ(0,"div",11),t._uU(1," Username is required "),t.qZA())}function U(e,o){if(1&e&&(t.TgZ(0,"div",11),t._uU(1),t.qZA()),2&e){const n=o.ngIf;t.xp6(1),t.hij(" Username must be at least ",n.requiredLength," characters long ")}}function Y(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,J,2,0,"div",8),t.YNc(2,U,2,1,"div",8),t.qZA()),2&e){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",n.errors.required),t.xp6(1),t.Q6J("ngIf",n.errors.minlength)}}function y(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Y,3,2,"div",5),t.qZA()),2&e){const n=o.ngIf;t.xp6(1),t.Q6J("ngIf",n.touched&&n.errors)}}function N(e,o){1&e&&(t.TgZ(0,"div",11),t._uU(1," Password is required "),t.qZA())}function L(e,o){if(1&e&&(t.TgZ(0,"div",11),t._uU(1),t.qZA()),2&e){const n=o.ngIf;t.xp6(1),t.hij(" Password must be at least ",n.requiredLength," characters long ")}}function Q(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,N,2,0,"div",8),t.YNc(2,L,2,1,"div",8),t.qZA()),2&e){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",n.errors.required),t.xp6(1),t.Q6J("ngIf",n.errors.minlength)}}function R(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Q,3,2,"div",5),t.qZA()),2&e){const n=o.ngIf;t.xp6(1),t.Q6J("ngIf",n.touched&&n.errors)}}function P(e,o){1&e&&(t.TgZ(0,"div",11),t._uU(1," Password is required "),t.qZA())}function S(e,o){if(1&e&&(t.TgZ(0,"div",11),t._uU(1),t.qZA()),2&e){const n=o.ngIf;t.xp6(1),t.hij(" Password must be at least ",n.requiredLength," characters long ")}}function G(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,P,2,0,"div",8),t.YNc(2,S,2,1,"div",8),t.qZA()),2&e){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",n.errors.required),t.xp6(1),t.Q6J("ngIf",n.errors.minlength)}}function M(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,G,3,2,"div",5),t.qZA()),2&e){const n=o.ngIf;t.xp6(1),t.Q6J("ngIf",n.touched&&n.errors)}}function F(e,o){1&e&&(t.TgZ(0,"p",11),t._uU(1,"Passwords are not the same!"),t.qZA())}function O(e,o){1&e&&(t.TgZ(0,"div",12),t.TgZ(1,"span",13),t._uU(2,"Loading..."),t.qZA(),t.qZA())}function B(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Register "),t.qZA())}const j=[{path:"login",component:(()=>{class e{constructor(n,i,p,$){this.fb=n,this.authService=i,this.router=p,this.platformId=$,this.loading=!1,this.isOpen=!0}ngOnInit(){this.populateForm(),(0,d.NF)(this.platformId)&&localStorage.getItem("token")&&this.router.navigateByUrl("products")}populateForm(){this.formGroup=this.fb.group({username:["",[r.kI.minLength(3),r.kI.required]],password:["",[r.kI.minLength(5),r.kI.required]]})}onSubmit(){const{username:n,password:i}=this.formGroup.value;this.loading=!0,this.authService.login(n,i).pipe((0,m.x)(()=>{this.loading=!1})).subscribe(()=>{this.isOpen=!1,this.router.navigateByUrl("products")})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(r.qu),t.Y36(f),t.Y36(g.F0),t.Y36(t.Lbi))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:15,vars:7,consts:[[1,"login"],[3,"formGroup","submit"],[1,"mb-3"],[1,"form-label"],["type","email","formControlName","username",1,"form-control"],[4,"ngIf"],["type","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border","role","status",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"form",1),t.NdJ("submit",function(){return i.onSubmit()}),t.TgZ(2,"div",2),t.TgZ(3,"label",3),t._uU(4,"Username"),t.qZA(),t._UZ(5,"input",4),t.YNc(6,T,2,1,"div",5),t.qZA(),t.TgZ(7,"div",2),t.TgZ(8,"label",3),t._uU(9,"Password"),t.qZA(),t._UZ(10,"input",6),t.YNc(11,q,2,1,"div",5),t.qZA(),t.TgZ(12,"button",7),t.YNc(13,b,3,0,"div",8),t.YNc(14,x,2,0,"span",5),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.Q6J("@openClose",i.isOpen?"open":"closed"),t.xp6(1),t.Q6J("formGroup",i.formGroup),t.xp6(5),t.Q6J("ngIf",i.formGroup.controls.username),t.xp6(5),t.Q6J("ngIf",i.formGroup.controls.password),t.xp6(1),t.Q6J("disabled",i.formGroup.invalid),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,d.O5],styles:[".login[_ngcontent-%COMP%]{width:50%;margin:0 auto}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:20%}.fly-out[_ngcontent-%COMP%]{animation:fly-out .3s ease-in-out forwards}@keyframes fly-out{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-100%)}}"],data:{animation:[(0,a.X$)("openClose",[(0,a.SB)("open",(0,a.oB)({transform:"translateY(0)",opacity:1})),(0,a.SB)("closed",(0,a.oB)({transform:"translateY(-100%)",opacity:0})),(0,a.eR)("* => closed",[(0,a.jt)("0.5s")]),(0,a.eR)("* => open",[(0,a.jt)("0.5s")])])]}}),e})()},{path:"register",component:(()=>{class e{constructor(n,i,p){this.fb=n,this.authService=i,this.router=p,this.loading=!1,this.passwordMissmatch=!1}ngOnInit(){this.populateForm(),this.formGroup.valueChanges.subscribe(n=>{n.password&&n.confirmPassword&&(this.passwordMissmatch=n.password!==n.confirmPassword)}),localStorage.getItem("token")&&this.router.navigateByUrl("products")}populateForm(){this.formGroup=this.fb.group({username:["",[r.kI.minLength(3),r.kI.required]],password:["",[r.kI.minLength(5),r.kI.required]],confirmPassword:["",[r.kI.minLength(5),r.kI.required]]})}onSubmit(){const{username:n,password:i}=this.formGroup.value;this.passwordMissmatch||(this.loading=!0,this.authService.register(n,i).pipe((0,m.x)(()=>this.loading=!1)).subscribe(()=>{this.router.navigateByUrl("products")}))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(r.qu),t.Y36(f),t.Y36(g.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-register"]],decls:21,vars:7,consts:[[1,"register"],[3,"formGroup","submit"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","username",1,"form-control"],[4,"ngIf"],["type","password","formControlName","password",1,"form-control"],["type","password","formControlName","confirmPassword",1,"form-control"],["class","text-danger",4,"ngIf"],["type","submit",1,"btn","btn-primary"],["class","spinner-border","role","status",4,"ngIf"],[1,"text-danger"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"form",1),t.NdJ("submit",function(){return i.onSubmit()}),t.TgZ(2,"div",2),t.TgZ(3,"label",3),t._uU(4,"Username"),t.qZA(),t._UZ(5,"input",4),t.YNc(6,y,2,1,"div",5),t.qZA(),t.TgZ(7,"div",2),t.TgZ(8,"label",3),t._uU(9,"Password"),t.qZA(),t._UZ(10,"input",6),t.YNc(11,R,2,1,"div",5),t.qZA(),t.TgZ(12,"div",2),t.TgZ(13,"label",3),t._uU(14,"Confirm Password"),t.qZA(),t._UZ(15,"input",7),t.YNc(16,M,2,1,"div",5),t.qZA(),t.YNc(17,F,2,0,"p",8),t.TgZ(18,"button",9),t.YNc(19,O,3,0,"div",10),t.YNc(20,B,2,0,"span",5),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("formGroup",i.formGroup),t.xp6(5),t.Q6J("ngIf",i.formGroup.controls.username),t.xp6(5),t.Q6J("ngIf",i.formGroup.controls.password),t.xp6(5),t.Q6J("ngIf",i.formGroup.controls.confirmPassword),t.xp6(1),t.Q6J("ngIf",i.passwordMissmatch),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,d.O5],styles:[".register[_ngcontent-%COMP%]{width:50%;margin:0 auto}.register[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:20%}"]}),e})()}];let k=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,g.Bz.forChild(j)],g.Bz]}),e})();var z=s(294);let X=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,k,z.I]]}),e})()}}]);