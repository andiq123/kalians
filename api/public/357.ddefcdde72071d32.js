"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[357],{5357:($,g,s)=>{s.r(g),s.d(g,{AuthModule:()=>X});var d=s(9808),u=s(1631),a=s(1777),r=s(2382),m=s(8746),e=s(4893),f=s(8505),c=s(2340),_=s(520);let l=(()=>{class n{constructor(t){this.http=t,this.baseUrl=c.N.apiUrl+"auth/"}login(t,i){return this.http.post(this.baseUrl+"login",{username:t,password:i}).pipe((0,f.b)(p=>{localStorage.setItem("token",p.token)}))}register(t,i){return this.http.post(this.baseUrl+"register",{username:t,password:i}).pipe((0,f.b)(p=>{localStorage.setItem("token",p.token)}))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(_.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function v(n,o){1&n&&(e.TgZ(0,"div",10),e._uU(1," Username is required "),e.qZA())}function h(n,o){if(1&n&&(e.TgZ(0,"div",10),e._uU(1),e.qZA()),2&n){const t=o.ngIf;e.xp6(1),e.hij(" Username must be at least ",t.requiredLength," characters long ")}}function Z(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,v,2,0,"div",9),e.YNc(2,h,2,1,"div",9),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.minlength)}}function T(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Z,3,2,"div",5),e.qZA()),2&n){const t=o.ngIf;e.xp6(1),e.Q6J("ngIf",t.touched&&t.errors)}}function I(n,o){1&n&&(e.TgZ(0,"div",10),e._uU(1," Password is required "),e.qZA())}function A(n,o){if(1&n&&(e.TgZ(0,"div",10),e._uU(1),e.qZA()),2&n){const t=o.ngIf;e.xp6(1),e.hij(" Password must be at least ",t.requiredLength," characters long ")}}function C(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,I,2,0,"div",9),e.YNc(2,A,2,1,"div",9),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.minlength)}}function q(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,C,3,2,"div",5),e.qZA()),2&n){const t=o.ngIf;e.xp6(1),e.Q6J("ngIf",t.touched&&t.errors)}}function x(n,o){1&n&&(e.TgZ(0,"div",11),e.TgZ(1,"span",12),e._uU(2,"Loading..."),e.qZA(),e.qZA())}function b(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1,"Sign in"),e.qZA())}function J(n,o){1&n&&(e.TgZ(0,"div",11),e._uU(1," Username is required "),e.qZA())}function Y(n,o){if(1&n&&(e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&n){const t=o.ngIf;e.xp6(1),e.hij(" Username must be at least ",t.requiredLength," characters long ")}}function U(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,J,2,0,"div",8),e.YNc(2,Y,2,1,"div",8),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.minlength)}}function N(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,U,3,2,"div",5),e.qZA()),2&n){const t=o.ngIf;e.xp6(1),e.Q6J("ngIf",t.touched&&t.errors)}}function y(n,o){1&n&&(e.TgZ(0,"div",11),e._uU(1," Password is required "),e.qZA())}function L(n,o){if(1&n&&(e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&n){const t=o.ngIf;e.xp6(1),e.hij(" Password must be at least ",t.requiredLength," characters long ")}}function Q(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,y,2,0,"div",8),e.YNc(2,L,2,1,"div",8),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.minlength)}}function R(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Q,3,2,"div",5),e.qZA()),2&n){const t=o.ngIf;e.xp6(1),e.Q6J("ngIf",t.touched&&t.errors)}}function P(n,o){1&n&&(e.TgZ(0,"div",11),e._uU(1," Password is required "),e.qZA())}function G(n,o){if(1&n&&(e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&n){const t=o.ngIf;e.xp6(1),e.hij(" Password must be at least ",t.requiredLength," characters long ")}}function M(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,P,2,0,"div",8),e.YNc(2,G,2,1,"div",8),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.minlength)}}function S(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,M,3,2,"div",5),e.qZA()),2&n){const t=o.ngIf;e.xp6(1),e.Q6J("ngIf",t.touched&&t.errors)}}function F(n,o){1&n&&(e.TgZ(0,"p",11),e._uU(1,"Passwords are not the same!"),e.qZA())}function O(n,o){1&n&&(e.TgZ(0,"div",12),e.TgZ(1,"span",13),e._uU(2,"Loading..."),e.qZA(),e.qZA())}function j(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1,"Register "),e.qZA())}const k=[{path:"login",component:(()=>{class n{constructor(t,i,p){this.fb=t,this.authService=i,this.router=p,this.loading=!1,this.isOpen=!0}ngOnInit(){this.populateForm()}populateForm(){this.formGroup=this.fb.group({username:["",[r.kI.minLength(3),r.kI.required]],password:["",[r.kI.minLength(5),r.kI.required]]})}onSubmit(){const{username:t,password:i}=this.formGroup.value;this.loading=!0,this.authService.login(t,i).pipe((0,m.x)(()=>{this.loading=!1})).subscribe(()=>{this.isOpen=!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(l),e.Y36(u.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:15,vars:7,consts:[[1,"login"],[3,"formGroup","submit"],[1,"mb-3"],[1,"form-label"],["type","email","formControlName","username",1,"form-control"],[4,"ngIf"],["type","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border","role","status",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1),e.NdJ("submit",function(){return i.onSubmit()}),e.TgZ(2,"div",2),e.TgZ(3,"label",3),e._uU(4,"Username"),e.qZA(),e._UZ(5,"input",4),e.YNc(6,T,2,1,"div",5),e.qZA(),e.TgZ(7,"div",2),e.TgZ(8,"label",3),e._uU(9,"Password"),e.qZA(),e._UZ(10,"input",6),e.YNc(11,q,2,1,"div",5),e.qZA(),e.TgZ(12,"button",7),e.YNc(13,x,3,0,"div",8),e.YNc(14,b,2,0,"span",5),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("@openClose",i.isOpen?"open":"closed"),e.xp6(1),e.Q6J("formGroup",i.formGroup),e.xp6(5),e.Q6J("ngIf",i.formGroup.controls.username),e.xp6(5),e.Q6J("ngIf",i.formGroup.controls.password),e.xp6(1),e.Q6J("disabled",i.formGroup.invalid),e.xp6(1),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngIf",!i.loading))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,d.O5],styles:[".login[_ngcontent-%COMP%]{width:50%;margin:0 auto}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:20%}.fly-out[_ngcontent-%COMP%]{animation:fly-out .3s ease-in-out forwards}@keyframes fly-out{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-100%)}}"],data:{animation:[(0,a.X$)("openClose",[(0,a.SB)("open",(0,a.oB)({transform:"translateY(0)",opacity:1})),(0,a.SB)("closed",(0,a.oB)({transform:"translateY(-100%)",opacity:0})),(0,a.eR)("* => closed",[(0,a.jt)("0.5s")]),(0,a.eR)("* => open",[(0,a.jt)("0.5s")])])]}}),n})()},{path:"register",component:(()=>{class n{constructor(t,i,p){this.fb=t,this.authService=i,this.router=p,this.loading=!1,this.passwordMissmatch=!1}ngOnInit(){this.populateForm(),this.formGroup.valueChanges.subscribe(t=>{t.password&&t.confirmPassword&&(this.passwordMissmatch=t.password!==t.confirmPassword)})}populateForm(){this.formGroup=this.fb.group({username:["",[r.kI.minLength(3),r.kI.required]],password:["",[r.kI.minLength(5),r.kI.required]],confirmPassword:["",[r.kI.minLength(5),r.kI.required]]})}onSubmit(){const{username:t,password:i}=this.formGroup.value;this.passwordMissmatch||(this.loading=!0,this.authService.register(t,i).pipe((0,m.x)(()=>this.loading=!1)).subscribe(()=>{this.router.navigateByUrl("products")}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(l),e.Y36(u.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],decls:21,vars:7,consts:[[1,"register"],[3,"formGroup","submit"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","username",1,"form-control"],[4,"ngIf"],["type","password","formControlName","password",1,"form-control"],["type","password","formControlName","confirmPassword",1,"form-control"],["class","text-danger",4,"ngIf"],["type","submit",1,"btn","btn-primary"],["class","spinner-border","role","status",4,"ngIf"],[1,"text-danger"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1),e.NdJ("submit",function(){return i.onSubmit()}),e.TgZ(2,"div",2),e.TgZ(3,"label",3),e._uU(4,"Username"),e.qZA(),e._UZ(5,"input",4),e.YNc(6,N,2,1,"div",5),e.qZA(),e.TgZ(7,"div",2),e.TgZ(8,"label",3),e._uU(9,"Password"),e.qZA(),e._UZ(10,"input",6),e.YNc(11,R,2,1,"div",5),e.qZA(),e.TgZ(12,"div",2),e.TgZ(13,"label",3),e._uU(14,"Confirm Password"),e.qZA(),e._UZ(15,"input",7),e.YNc(16,S,2,1,"div",5),e.qZA(),e.YNc(17,F,2,0,"p",8),e.TgZ(18,"button",9),e.YNc(19,O,3,0,"div",10),e.YNc(20,j,2,0,"span",5),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.formGroup),e.xp6(5),e.Q6J("ngIf",i.formGroup.controls.username),e.xp6(5),e.Q6J("ngIf",i.formGroup.controls.password),e.xp6(5),e.Q6J("ngIf",i.formGroup.controls.confirmPassword),e.xp6(1),e.Q6J("ngIf",i.passwordMissmatch),e.xp6(2),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngIf",!i.loading))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,d.O5],styles:[".register[_ngcontent-%COMP%]{width:50%;margin:0 auto}.register[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:20%}"]}),n})()}];let B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,u.Bz.forChild(k)],u.Bz]}),n})();var z=s(294);let X=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,B,z.I]]}),n})()}}]);